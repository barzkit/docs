# x402 Payments

x402 is a protocol for machine-to-machine payments using HTTP status code 402 (Payment Required). It enables AI agents to pay for API calls, data access, and services programmatically.

This feature is planned for Phase 3.

## Concept

When an AI agent calls an API that requires payment, the server responds with HTTP 402 and includes payment details (amount, token, recipient address). The agent wallet automatically constructs and sends the payment, then retries the request with a payment proof header.

```
Agent → API Server: GET /data
Server → Agent: 402 Payment Required (0.01 USDC to 0x...)
Agent → Blockchain: send 0.01 USDC
Agent → API Server: GET /data + X-Payment-Proof: 0xtxhash
Server → Agent: 200 OK + data
```

## Why BarzKit is suited for x402

- **Gasless transactions** — agents can pay in USDC without holding ETH for gas
- **Batch transactions** — approve + transfer in a single atomic UserOperation
- **Permission boundaries** — `maxAmountPerTx` prevents an agent from overpaying
- **Token whitelists** — restrict which tokens the agent can use for payments

## Planned API

```typescript
// Phase 3 — API subject to change
const response = await agent.x402Request('https://api.example.com/data', {
  maxPayment: '1 USDC',
  token: 'USDC',
})
```

## Status

Not yet implemented. Tracking in the Phase 3 roadmap. The x402 protocol is being developed by Coinbase and adopted by several API providers.
